[metadata]
name = "fontconfig"
description = "XML-based font configuration API for X Windows"
homepage = "https://wiki.freedesktop.org/www/Software/fontconfig/"
binaries = ["bin/fc-list", "bin/fc-cache", "bin/fc-match"]

# glibc Linux: Homebrew bottle
[[steps]]
action = "homebrew"
formula = "fontconfig"
when = { os = ["linux"], libc = ["glibc"] }

[[steps]]
action = "install_binaries"
install_mode = "directory"
outputs = ["bin/fc-list", "bin/fc-cache", "bin/fc-match", "bin/fc-cat", "bin/fc-pattern", "bin/fc-query", "bin/fc-scan", "bin/fc-validate"]
when = { os = ["linux"], libc = ["glibc"] }

# musl Linux: Alpine package
[[steps]]
action = "apk_install"
packages = ["fontconfig"]
when = { os = ["linux"], libc = ["musl"] }

# macOS: Homebrew
[[steps]]
action = "homebrew"
formula = "fontconfig"
when = { os = ["darwin"] }

[[steps]]
action = "install_binaries"
install_mode = "directory"
outputs = ["bin/fc-list", "bin/fc-cache", "bin/fc-match", "bin/fc-cat", "bin/fc-pattern", "bin/fc-query", "bin/fc-scan", "bin/fc-validate"]
when = { os = ["darwin"] }

[verify]
command = "fc-list --version"
pattern = "fontconfig version {version}"
