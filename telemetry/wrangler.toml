name = "tsuku-telemetry"
main = "src/index.ts"
compatibility_date = "2024-11-27"

[[analytics_engine_datasets]]
binding = "ANALYTICS"
dataset = "tsuku_telemetry"

[vars]
CF_ACCOUNT_ID = "3c4fa2269fc145e89553adc332dc9546"

# CF_API_TOKEN should be set via wrangler secret
# VERSION_TOKEN should be set via wrangler secret
# COMMIT_SHA and DEPLOY_TIME are set by CI during deployment

[[d1_databases]]
binding = "BATCH_METRICS"
database_name = "tsuku-batch-metrics"
database_id = "00000000-0000-0000-0000-000000000000" # Overridden by CI from vars.BATCH_METRICS_DATABASE_ID
migrations_dir = "migrations"

# Custom domain: telemetry.tsuku.dev
# Configured via Cloudflare Dashboard (Workers > tsuku-telemetry > Settings > Domains & Routes)
