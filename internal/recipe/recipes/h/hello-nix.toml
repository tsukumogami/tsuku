# hello-nix - Test recipe for nix_install action
# Uses GNU Hello, a small package available in all nixpkgs channels
#
# IMPORTANT: This recipe only works on Linux (nix-portable limitation)
#
# This demonstrates the nix_install action which:
# - Downloads nix-portable if not present (~75MB, one-time)
# - Installs packages from nixpkgs binary cache (no compilation)
# - Creates wrapper scripts that invoke through nix-portable's virtualization
#
# Use case: Tools with complex dependencies that can't be handled by
# direct binary downloads or cargo/gem/pipx with zig fallback

[metadata]
name = "hello-nix"
description = "GNU Hello (installed via nix) - test recipe for nix_install"
homepage = "https://www.gnu.org/software/hello/"
tier = 3

[version]
source = "nixpkgs"

[[steps]]
action = "nix_install"
package = "hello"
executables = ["hello"]

[verify]
command = "{install_dir}/bin/hello --version"
mode = "output"
pattern = "hello"
reason = "nix package version differs from upstream GNU Hello version"
