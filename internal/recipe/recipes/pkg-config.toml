[metadata]
name = "pkg-config"
description = "Helper tool for compile and link flags for libraries"
homepage = "https://www.freedesktop.org/wiki/Software/pkg-config/"
binaries = ["bin/pkg-config"]

# glibc Linux: Homebrew bottles
[[steps]]
action = "homebrew"
formula = "pkgconf"
when = { os = ["linux"], libc = ["glibc"] }

[[steps]]
action = "install_binaries"
install_mode = "directory"
outputs = ["bin/pkg-config", "bin/pkgconf", "lib/libpkgconf.so", "lib/libpkgconf.so.7", "lib/libpkgconf.so.7.0.0"]
when = { os = ["linux"], libc = ["glibc"] }

# musl Linux: System packages
[[steps]]
action = "apk_install"
packages = ["pkgconf"]
when = { os = ["linux"], libc = ["musl"] }

# macOS: Homebrew
[[steps]]
action = "homebrew"
formula = "pkgconf"
when = { os = ["darwin"] }

[[steps]]
action = "install_binaries"
install_mode = "directory"
outputs = ["bin/pkg-config", "bin/pkgconf", "lib/libpkgconf.dylib", "lib/libpkgconf.7.dylib"]
when = { os = ["darwin"] }

[verify]
command = "pkg-config --version"
pattern = "{version}"
