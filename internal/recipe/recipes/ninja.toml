[metadata]
name = "ninja"
description = "Small build system with a focus on speed"
homepage = "https://ninja-build.org/"
binaries = ["bin/ninja"]

[[steps]]
action = "download"
url = "https://github.com/ninja-build/ninja/archive/v{version}.tar.gz"
skip_verification_reason = "GitHub source archives don't provide checksums"

[[steps]]
action = "extract"
archive = "v{version}.tar.gz"
format = "tar.gz"

[[steps]]
action = "cmake_build"
source_dir = "ninja-{version}"
executables = ["ninja"]
cmake_args = ["-DBUILD_TESTING=OFF"]

[[steps]]
action = "install_binaries"
install_mode = "directory"
outputs = ["bin/ninja"]

[verify]
# Use absolute path to ensure we verify the installed binary, not system ninja
command = "{install_dir}/bin/ninja --version"
pattern = "{version}"
