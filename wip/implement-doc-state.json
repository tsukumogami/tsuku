{
  "design_doc": "docs/designs/DESIGN-secrets-manager.md",
  "milestone_name": "secrets-manager",
  "milestone_number": 86,
  "branch": "docs/secrets-manager",
  "started_at": "2026-02-17T00:20:34Z",
  "pr_number": 1731,
  "pr_url": "https://github.com/tsukumogami/tsuku/pull/1731",
  "integrity_hash": "sha256:eea1b9feb90c7a0319edd115fcfb3c3c9fb6849ec737699365aa7798fa8ec21d",
  "issues": [
    {
      "number": 1733,
      "title": "feat(secrets): add core secrets resolution package",
      "status": "completed",
      "ci_status": "passed",
      "ci_fix_attempts": 0,
      "dependencies": [],
      "tier": "testable",
      "commits": [
        "44747c23a7ebe68c281b0e7f4cf490b60d160755"
      ],
      "summary": null,
      "reviewer_results": {
        "pragmatic": {
          "blocking": [],
          "advisory": [
            "sync.Once/loadConfig are no-op scaffolding (YAGNI for now, #1734 can add)",
            "Error message mentions config.toml before config file support exists",
            "Hardcoded count 5 in TestKnownKeysReturnsAllSecrets is fragile"
          ]
        },
        "architect": {
          "blocking": [],
          "advisory": [
            "Package-level sync.Once makes config injection rigid for #1734 (consistent with design)",
            "Package-level functions with global state matches codebase patterns",
            "KeyInfo/KeySpec separation is good public/private API boundary"
          ]
        },
        "maintainer": {
          "blocking": [],
          "advisory": [
            "Get() and IsSet() duplicate env var resolution loop",
            "Error message could use Desc field for friendlier output",
            "Hard-coded count of 5 known keys will break on addition",
            "TestGetAllKnownKeysFromEnv doesn't verify specific values match",
            "TestKnownKeysContainsExpectedEntries hard-codes key list (acceptable as golden list)"
          ]
        },
        "verdict": "All findings advisory. Ready to push."
      }
    },
    {
      "number": 1734,
      "title": "feat(userconfig): add secrets section with atomic writes and 0600 permissions",
      "status": "completed",
      "ci_status": "passed",
      "ci_fix_attempts": 0,
      "dependencies": [
        1733
      ],
      "tier": "critical",
      "commits": [
        "2d6b4b9172dc6434c68bd20cf7569d1853120701"
      ],
      "summary": null,
      "reviewer_results": {
        "pragmatic": {
          "blocking": [],
          "advisory": [
            "userconfig.Set(secrets.anything) accepts arbitrary key names with no knownKeys validation - #1737 CLI must add validation",
            "getConfig() error silently falls through to not-configured message - log.Warn would help debugging"
          ]
        },
        "architect": {
          "blocking": [],
          "advisory": [
            "sync.Once caching means config changes in same process not visible - fine for CLI model",
            "userconfig.Set accepts arbitrary secret names - correct separation, #1737 should validate"
          ]
        },
        "maintainer": {
          "blocking": [],
          "advisory": [
            "Package doc says ~/.tsuku but convention requires $TSUKU_HOME",
            "Get() and IsSet() in secrets.go duplicate full resolution chain",
            "Permission warning doesn't mention tightening on next write",
            "Permission warning tests don't verify log output",
            "Hard-coded len(keys) != 5 in test"
          ]
        },
        "verdict": "All findings advisory. Ready to push."
      }
    },
    {
      "number": 1735,
      "title": "refactor(llm): migrate API key resolution to secrets package",
      "status": "completed",
      "ci_status": "passed",
      "ci_fix_attempts": 0,
      "dependencies": [
        1734
      ],
      "tier": "testable",
      "commits": [
        "f0e77df2b72b10eefc65ec19ee76c161e27299d9"
      ],
      "summary": null,
      "reviewer_results": {
        "pragmatic": {
          "blocking": [],
          "advisory": []
        },
        "architect": {
          "blocking": [],
          "advisory": [
            "client.go:25 godoc still says ANTHROPIC_API_KEY from environment",
            "factory.go:176 error message hardcodes env var names"
          ]
        },
        "maintainer": {
          "blocking": [],
          "advisory": [
            "client.go:25 stale godoc about env var resolution",
            "factory_test.go has copy-pasted env var save/restore boilerplate",
            "factory.go:176 hardcodes env var names in no-providers error"
          ]
        },
        "verdict": "All findings advisory. Ready to push."
      }
    },
    {
      "number": 1736,
      "title": "refactor: migrate platform tokens to secrets package",
      "status": "completed",
      "ci_status": "passed",
      "ci_fix_attempts": 0,
      "dependencies": [
        1734
      ],
      "tier": "testable",
      "commits": [
        "a031c91f7e7328ab93e5eeedf9e0e8f3be1ccfdb"
      ],
      "summary": null,
      "reviewer_results": {
        "pragmatic": {
          "blocking": [],
          "advisory": [
            "search/factory.go duplicates guidance already in secrets.Get() error",
            "Inconsistent resolve-once vs resolve-per-call pattern across files",
            "token, _ = secrets.Get() pattern is correct for optional tokens"
          ]
        },
        "architect": {
          "blocking": [],
          "advisory": [
            "provider_tap.go:159 stale comment says GITHUB_TOKEN",
            "llm_discovery.go:788 comment says with GITHUB_TOKEN",
            "llm_discovery.go:90 struct comment references GITHUB_TOKEN"
          ]
        },
        "maintainer": {
          "blocking": [],
          "advisory": [
            "Four stale comments referencing old direct-env-var pattern",
            "github_release.go has duplicated rate-limit response parsing (pre-existing)",
            "Comments should mention secrets package resolution path"
          ]
        },
        "verdict": "All findings advisory. Ready to push."
      }
    },
    {
      "number": 1737,
      "title": "feat(cli): add secrets management to tsuku config",
      "status": "implemented",
      "ci_status": "pending",
      "ci_fix_attempts": 0,
      "dependencies": [
        1734
      ],
      "tier": "testable",
      "commits": [
        "2f17f8035558780b28cfb8efbc565e68d1b3cf47"
      ],
      "summary": null,
      "reviewer_results": {
        "pragmatic": {
          "blocking": [],
          "advisory": [
            "Help text uses ~/.tsuku instead of $TSUKU_HOME",
            "isKnownSecret allocates on every call (negligible with 5 keys)"
          ]
        },
        "architect": {
          "blocking": [],
          "advisory": [
            "Two terminal-detection patterns coexist (x/term vs Stat)",
            "Secret name validation only in CLI layer",
            "JSON output struct defined inline",
            "Package-level mutable state for stdin testing is standard",
            "Design doc alignment is exact"
          ]
        },
        "maintainer": {
          "blocking": [],
          "advisory": [
            "configCmd.Long help text omits secrets.\u003cname\u003e",
            "Unknown key error paths don't mention secrets",
            "Inconsistent CutPrefix vs HasPrefix+CutPrefix patterns"
          ]
        },
        "verdict": "All findings advisory. Ready to push."
      }
    }
  ],
  "skipped_issues": null,
  "current_issue_index": 0,
  "test_plan_file": "wip/implement-doc_secrets-manager_test_plan.md",
  "doc_plan_file": "wip/implement-doc_secrets-manager_doc_plan.md",
  "workflow_template": ".claude/command_assets/phases/implement-doc_phases/workflow-template.md",
  "resumed_at": null
}
