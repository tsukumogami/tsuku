# Ground truth recipe for sqlite (source build from Fossil SCM)
# Used for testing fossil_archive action with configure_make
# Tests: fossil_archive + configure_make (no readline - simpler test case)

[metadata]
name = "sqlite-source"
description = "Command-line interface for SQLite (source build for testing)"
homepage = "https://sqlite.org/"

[version]
# Version is resolved from Fossil timeline at https://sqlite.org/src/timeline?t=release
fossil_repo = "https://sqlite.org/src"
project_name = "sqlite"
tag_prefix = "version-"

[[steps]]
action = "fossil_archive"
repo = "https://sqlite.org/src"
project_name = "sqlite"
strip_dirs = 1

[[steps]]
action = "configure_make"
source_dir = "."
executables = ["sqlite3"]

[[steps]]
action = "install_binaries"
install_mode = "directory"
outputs = ["bin/sqlite3"]

[verify]
command = "sqlite3 --version"
pattern = "{version}"
